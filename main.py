from flask import Flask, request, jsonify, render_template, redirect, url_for, session, send_from_directory
import google.generativeai as genai
from dotenv import load_dotenv
import os
load_dotenv()



app = Flask(__name__)
  # Replace with a strong secret key in production

genai.configure(api_key=os.getenv('GEMINI_API_KEY'))
# Configure the Gemini API
  # Replace with your actual Gemini API key

# Define the generation parameters
generation_config = {
    "temperature": 0.7,
    "top_p": 0.9,
    "top_k": 50,
    "max_output_tokens": 4096,
    "response_mime_type": "text/plain",
}

# Create the model
model = genai.GenerativeModel(
    model_name="gemini-1.5-pro",
    generation_config=generation_config,
    system_instruction=(
        "Chatbot Name: ChefBot\n\nPersona: ChefBot is your friendly virtual chef, always ready to share delicious recipes with a touch of humor and charm. It specializes in Indian cuisine but can also provide recipes from around the world.\n\nMain Functionality:\n\nRecipe Search: Users can ask ChefBot for recipes of various dishes, with a focus on Indian cuisine.\nIngredient List: ChefBot provides a highlighted list of ingredients required for each recipe, along with links to purchase them from Instamart.\nCooking Instructions: ChefBot gives step-by-step cooking instructions in a fun and easy-to-follow manner.\nLanguages:Chefbot can response in any languages in India the user speak In.\nHumor: ChefBot sprinkles jokes and light-hearted comments to make cooking a delightful experience.\nSample Interaction:\n\nUser: Hi ChefBot! I'm in the mood for some paneer butter masala tonight. Can you help me with a recipe?\n\nChefBot: Oh, you've got excellent taste! Paneer butter masala is a star of Indian cuisine. Get your apron ready! Here's what you'll need:\n\nPaneer\nButter (of course!)\nTomatoes\nCream\nSpices: garam masala, turmeric, cumin\nFresh coriander for garnish\nFeeling hungry already?\nUser: Yum! What's the key to a rich, creamy gravy?\n\nChefBot: Ah, the magic is in slow cooking and generous butter. But remember, don't taste too much while cooking or there wonтАЩt be any left for dinner! ЁЯШД Ready for the instructions?\n\nUser: Yes, please! How do I make it?\n\nChefBot: Step 1: Saut├й onions and spices in butter. Step 2: Add tomatoes and simmer until soft. Step 3: Blend to a smooth sauce. Step 4: Add paneer cubes and cream, and let the magic happen. Garnish with coriander and serve with naan or rice. YouтАЩve just made restaurant-worthy paneer butter masala!\n\nUser: That sounds delicious! Thanks, ChefBot!\n\nChefBot: My pleasure! Enjoy, and remember, IтАЩm always here to spice up your kitchen with more recipes. Happy cooking!\n\n"    ),
)

# Initialize chat session
chat_session = model.start_chat(history=[])

# Define common ingredients used in most dishes
common_ingredients = {
    "turmeric powder": ["turmeric powder", "рд╣рд▓реНрджреА", "роороЮрпНроЪро│рпН родрпВро│рпН", "р▓╣р▓░р▓┐р▓жр▓┐ р▓кр│Бр▓бр▓┐", "р░кр░╕р▒Бр░кр▒Б р░кр▒Кр░бр░┐", "рж╣рж▓рзБржж ржЧрзБржБржбрж╝рзЛ"],
    "red chili powder": ["red chili powder", "рд▓рд╛рд▓ рдорд┐рд░реНрдЪ рдкрд╛рдЙрдбрд░", "роЪро┐ро╡рокрпНрокрпБ рооро┐ро│роХро╛ропрпН родрпВро│рпН", "р▓Хр│Жр▓Вр▓кр│Б р▓ор│Жр▓гр▓╕р▓┐р▓и р▓кр│Бр▓бр▓┐", "р░Ор░░р▒Нр░░ р░ор░┐р░░р▒Нр░Ър░┐ р░кр▒Кр░бр░┐", "рж▓рж╛рж▓ ржорж░рж┐ржЪ ржЧрзБржБржбрж╝рзЛ"],
    "coriander powder": ["coriander powder", "рдзрдирд┐рдпрд╛ рдкрд╛рдЙрдбрд░", "роХрпКродрпНродрооро▓рпНро▓ро┐ родрпВро│рпН", "р▓Хр│Кр▓др│Нр▓др▓Вр▓мр▓░р▓┐ р▓кр│Бр▓бр▓┐", "р░зр░ир░┐р░пр░╛р░▓ р░кр▒Кр░бр░┐", "ржзржирзЗ ржЧрзБржБржбрж╝рзЛ"],
    "cumin powder": ["cumin powder", "рдЬреАрд░рд╛ рдкрд╛рдЙрдбрд░", "роЪрпАро░роХ родрпВро│рпН", "р▓Ьр│Ар▓░р▓┐р▓Чр│Ж р▓кр│Бр▓бр▓┐", "р░Ьр▒Ар░▓р░Хр░░р▒Нр░░ р░кр▒Кр░бр░┐", "ржЬрж┐рж░рж╛ ржЧрзБржБржбрж╝рзЛ"],
    "mustard seeds": ["mustard seeds", "рд╕рд░рд╕реЛрдВ рдХреЗ рдмреАрдЬ", "роХроЯрпБроХрпБ ро╡ро┐родрпИроХро│рпН", "р▓╕р▓╛р▓╕р▓┐р▓╡р│Ж", "р░Жр░╡р░╛р░▓р▒Б", "рж╕рж░рж╖рзЗрж░ ржмрзАржЬ"],
    "fennel seeds": ["fennel seeds", "рд╕реМрдВрдл", "рокрпЖро░рпБроЮрпНроЪрпАро░роХроорпН", "р▓╕р│Кр▓Вр▓кр│Б", "р░╕р▒Лр░Вр░кр▒Б", "ржорзМрж░рж┐"],
    "fenugreek seeds": ["fenugreek seeds", "рдореЗрдереА рдХреЗ рдмреАрдЬ", "ро╡рпЖроирпНродропроорпН", "р▓ор│Жр▓Вр▓др│Нр▓п", "р░ор▒Жр░Вр░др▒Бр░▓р▒Б", "ржорзЗржерж┐ ржмрзАржЬ"],
    "clove": ["clove", "рд▓реМрдВрдЧ", "роХро┐ро░ро╛роорпНрокрпБ", "р▓▓р▓╡р▓Вр▓Ч", "р░▓р░╡р░Вр░Чр░╛р░▓р▒Б", "рж▓ржмржЩрзНржЧ"],
    "cardamom": ["cardamom", "рдЗрд▓рд╛рдпрдЪреА", "роПро▓роХрпНроХро╛ропрпН", "р▓Ор▓▓р▓Хр│Нр▓Хр▓┐", "р░Пр░▓р░Хр▒Бр░▓р▒Б", "ржПрж▓рж╛ржЪ"],
    "cinnamon": ["cinnamon", "рджрд╛рд▓рдЪреАрдиреА", "роЗро▓ро╡роЩрпНроХрокрпНрокроЯрпНроЯрпИ", "р▓Ър▓Хр│Нр▓Хр│Ж", "р░жр░╛р░▓р▒Нр░Ър░┐р░и р░Ър▒Жр░Хр▒Нр░Х", "ржжрж╛рж░ржЪрж┐ржирж┐"],
    "black pepper": ["black pepper", "рдХрд╛рд▓реА рдорд┐рд░реНрдЪ", "роХро░рпБрокрпНрокрпБ рооро┐ро│роХрпБ", "р▓Хр▓кр│Нр▓кр│Б р▓ор│Жр▓гр▓╕р│Б", "р░ир░▓р▒Нр░▓ р░ор░┐р░░р░┐р░пр░╛р░▓р▒Б", "ржЧрзЛрж▓ржорж░рж┐ржЪ"],
    "bay leaf": ["bay leaf", "рддреЗрдЬ рдкрддреНрддрд╛", "рокро┐ро░ро┐ропро╛рогро┐ роЗро▓рпИ", "р▓мр▓┐р▓░р▓┐р▓пр▓╛р▓ир▓┐ р▓Ор▓▓р│Ж", "р░мр░┐р░░р▒Нр░пр░╛р░ир▒А р░Жр░Хр▒Б", "рждрзЗржЬржкрж╛рждрж╛"],
    "star anise": ["star anise", "рдЪрдХреНрд░ рдлреВрд▓", "роЕройро┐роЪро┐рокрпН рокрпВ", "р▓Ър▓Хр│Нр▓░р▓лр│Бр▓▓р│Н", "р░Ер░ир░╕р░кр▒Бр░╡р▒Нр░╡р▒Б", "рждрж╛рж░рж╛ ржлрзБрж▓"],
    "asafoetida": ["asafoetida", "рд╣реАрдВрдЧ", "рокрпЖро░рпБроЩрпНроХро╛ропроорпН", "р▓Зр▓Вр▓Чр│Б", "р░Зр░Вр░Чр▒Бр░╡", "рж╣рж┐ржВ"],
    "garam masala": ["garam masala", "рдЧрд░рдо рдорд╕рд╛рд▓рд╛", "роХро░роорпН роороЪро╛ро▓ро╛", "р▓Чр▓░р▓В р▓ор▓╕р▓╛р▓▓р▓╛", "р░Чр░░р░ор▒Н р░ор░╕р░╛р░▓р░╛", "ржЧрж░ржо ржорж╕рж▓рж╛"],
    "amchur powder": ["amchur powder", "рдЕрдордЪреВрд░ рдкрд╛рдЙрдбрд░", "рооро╛роЩрпНроХро╛ропрпН родрпВро│рпН", "р▓Ер▓ор▓Ър│Вр▓░р│Н р▓кр│Бр▓бр▓┐", "р░Ер░ор▒Нр░Ър▒Вр░░р▒Н р░кр▒Кр░бр░┐", "ржЖржоржЪрзБрж░ ржЧрзБржБржбрж╝рзЛ"],
    "kasuri methi": ["kasuri methi", "рдХрд╕реВрд░реА рдореЗрдереА", "роХроЪрпВро░ро┐ ро╡рпЖроирпНродропроорпН", "р▓Хр▓╕р│Вр▓░р▓┐ р▓ор│Жр▓Вр▓др│Нр▓п", "р░Хр░╕р▒Вр░░р░┐ р░ор▒Жр░Вр░др░┐", "ржХрж╛рж╕рзБрж░рж┐ ржорзЗржерж┐"],
    "chat masala": ["chat masala", "рдЪрд╛рдЯ рдорд╕рд╛рд▓рд╛", "роЪро╛роЯрпН роороЪро╛ро▓ро╛", "р▓Ър▓╛р▓Яр│Н р▓ор▓╕р▓╛р▓▓р▓╛", "р░Ър░╛р░Яр▒Н р░ор░╕р░╛р░▓р░╛", "ржЪрж╛ржЯ ржорж╕рж▓рж╛"],
    "urad dal": ["urad dal", "рдЙрдбрд╝рдж рджрд╛рд▓", "роЙро│рпБроирпНродрпБ", "р▓Йр▓жр│Нр▓жр▓┐р▓и р▓мр│Зр▓│р│Ж", "р░ор░┐р░ир░кр▒Нр░кр░кр▒Нр░кр▒Б", "ржмрзБржЯ ржбрж╛рж▓"],
    "toor dal": ["toor dal", "рддреВрд░ рджрд╛рд▓", "родрпБро╡ро░роорпН рокро░рпБрокрпНрокрпБ", "р▓др│Кр▓Чр▓░р▓┐ р▓мр│Зр▓│р│Ж", "р░Хр░Вр░жр░┐р░кр░кр▒Нр░кр▒Б", "рждрзБрж░ ржбрж╛рж▓"],
    "chana dal": ["chana dal", "рдЪрдирд╛ рджрд╛рд▓", "роХроЯро▓рпИ рокро░рпБрокрпНрокрпБ", "р▓Хр▓бр▓▓р│Ж р▓мр│Зр▓│р│Ж", "р░╢р░ир░Чр░кр░кр▒Нр░кр▒Б", "ржЫрзЛрж▓рж╛ ржбрж╛рж▓"],
    "masoor dal": ["masoor dal", "рдорд╕реВрд░ рджрд╛рд▓", "роороЪрпВро░рпН рокро░рпБрокрпНрокрпБ", "р▓ор▓╕р│Вр▓░р│Б р▓мр│Зр▓│р│Ж", "р░ор░╕р▒Вр░░р░┐ р░кр░кр▒Нр░кр▒Б", "ржорж╕рзБрж░ ржбрж╛рж▓"],
    "moong dal": ["moong dal", "рдореВрдВрдЧ рджрд╛рд▓", "рокропро▒рпБ рокро░рпБрокрпНрокрпБ", "р▓╣р│Жр▓╕р▓░р│Б р▓мр│Зр▓│р│Ж", "р░кр▒Жр░╕р░░р░кр░кр▒Нр░кр▒Б", "ржорзБржЧ ржбрж╛рж▓"],
    "rajma": ["rajma", "рд░рд╛рдЬрдорд╛", "ро░ро╛роЬрпНрооро╛", "р▓░р▓╛р▓Ьр│Нр▓ор▓╛", "р░░р░╛р░Ьр▒Нр░ор░╛", "рж░рж╛ржЬржорж╛"],
    "kabuli chana": ["kabuli chana", "рдХрд╛рдмреБрд▓реА рдЪрдирд╛", "роХро╛рокрпВро▓ро┐ роЪрпБрогрпНроЯро▓рпН", "р▓Хр▓╛р▓мр│Бр▓▓р▓┐ р▓Хр▓бр▓▓р│Ж", "р░Хр░╛р░мр▒Вр░▓р▒А р░╢р░ир░Чр░▓р▒Б", "ржХрж╛ржмрзБрж▓рж┐ ржЫрзЛрж▓рж╛"],
    "basmati rice": ["basmati rice", "рдмрд╛рд╕рдорддреА рдЪрд╛рд╡рд▓", "рокро╛роЪрпБроородро┐ роЕро░ро┐роЪро┐", "р▓мр▓╛р▓╕р│Нр▓ор▓др▓┐ р▓Ер▓Хр│Нр▓Хр▓┐", "р░мр░╛р░╕р▒Нр░ор░др░┐ р░мр░┐р░пр▒Нр░пр░В", "ржмрж╛рж╕ржорждрж┐ ржЪрж╛рж▓"],
    "sona masoori rice": ["sona masoori rice", "рд╕реЛрдирд╛ рдорд╕реВрд░реА рдЪрд╛рд╡рд▓", "роЪрпЛройро╛ роороЪрпВро░ро┐ роЕро░ро┐роЪро┐", "р▓╕р│Лр▓гр▓╛ р▓ор▓╕р│Вр▓░р▓┐ р▓Ер▓Хр│Нр▓Хр▓┐", "р░╕р▒Лр░ир░╛ р░ор░╕р▒Вр░░р░┐ р░мр░┐р░пр▒Нр░пр░В", "рж╕рзЛржирж╛ ржорж╕рзВрж░рж┐ ржЪрж╛рж▓"],
    "brown rice": ["brown rice", "рдмреНрд░рд╛рдЙрди рдЪрд╛рд╡рд▓", "рокро┤рпБрокрпНрокрпБ роЕро░ро┐роЪро┐", "р▓мр│Нр▓░р│Мр▓ир│Н р▓Ер▓Хр│Нр▓Хр▓┐", "р░мр▒Нр░░р▒Мр░ир▒Н р░░р▒Ир░╕р▒Н", "ржмрж╛ржжрж╛ржорж┐ ржЪрж╛рж▓"],
    "wheat flour": ["wheat flour", "рдЧреЗрд╣реВрдВ рдХрд╛ рдЖрдЯрд╛", "роХрпЛродрпБроорпИ рооро╛", "р▓Чр│Лр▓зр▓┐ р▓╣р▓┐р▓Яр│Нр▓Яр│Б", "р░Чр▒Лр░зр▒Бр░о р░кр░┐р░Вр░бр░┐", "ржЧржорзЗрж░ ржЖржЯрж╛"],
    "whole wheat flour": ["whole wheat flour", "рд╕рдВрдкреВрд░реНрдг рдЧреЗрд╣реВрдВ рдХрд╛ рдЖрдЯрд╛", "роорпБро┤рпБ роХрпЛродрпБроорпИ рооро╛", "р▓кр│Вр▓░р│Нр▓г р▓Чр│Лр▓зр▓┐ р▓╣р▓┐р▓Яр│Нр▓Яр│Б", "р░кр▒Вр░░р▒Нр░др░┐ р░Чр▒Лр░зр▒Бр░о р░кр░┐р░Вр░бр░┐", "рж╕ржорзНржкрзВрж░рзНржг ржЧржорзЗрж░ ржЖржЯрж╛"],
    "rice flour": ["rice flour", "рдЪрд╛рд╡рд▓ рдХрд╛ рдЖрдЯрд╛", "роЕро░ро┐роЪро┐ рооро╛ро╡рпБ", "р▓Ер▓Хр│Нр▓Хр▓┐ р▓╣р▓┐р▓Яр│Нр▓Яр│Б", "р░мр░┐р░пр▒Нр░пр░В р░кр░┐р░Вр░бр░┐", "ржЪрж╛рж▓рзЗрж░ ржЖржЯрж╛"],
    "rava": ["rava", "рд░рд╡рд╛", "ро░ро╡рпИ", "р▓░р▓╡р│Ж", "р░░р░╡р▒Нр░╡", "рж░ржмрзНржмрж╛"],
    "cornflour": ["cornflour", "рдордХрдИ рдХрд╛ рдЖрдЯрд╛", "роЪрпЛро│роорпН рооро╛ро╡рпБ", "р▓ор│Жр▓Хр│Нр▓Хр│Жр▓Ьр│Лр▓│ р▓╣р▓┐р▓Яр│Нр▓Яр│Б", "р░ор▒Кр░Хр▒Нр░Хр░Ьр▒Кр░ир▒Нр░и р░кр░┐р░Вр░бр░┐", "ржнрзБржЯрзНржЯрж╛рж░ ржЖржЯрж╛"],
    "jowar": ["jowar", "рдЬреНрд╡рд╛рд░", "роЪрпЛро│роорпН", "р▓Ьр│Лр▓│", "р░Ьр▒Кр░ир▒Нр░и", "ржЬрзЛржпрж╝рж╛рж░"],
    "bajra": ["bajra", "рдмрд╛рдЬрд░рд╛", "роХроорпНрокрпБ", "р▓╕р▓Ьр│Нр▓Ьр│Ж", "р░╕р░Ьр▒Нр░Ь", "ржмрж╛ржЬрж░рж╛"],
    "oats": ["oats", "рдЬрдИ", "роУроЯрпНро╕рпН", "р▓Ур▓Яр│Нр▓╕р│Н", "р░Ур░Яр▒Нр░╕р▒Н", "ржУржЯрж╕"],
    "onion": ["onion", "рдкреНрдпрд╛рдЬ", "ро╡рпЖроЩрпНроХро╛ропроорпН", "р▓Ир▓░р│Бр▓│р│Нр▓│р▓┐", "р░Йр░▓р▒Нр░▓р░┐р░кр░╛р░п", "ржкрзЗржБржпрж╝рж╛ржЬ"],
    "tomato": ["tomato", "рдЯрдорд╛рдЯрд░", "родроХрпНроХро╛ро│ро┐", "р▓Яр│Кр▓ор│Жр▓Яр│К", "р░Яр░ор░╛р░Я", "ржЯржорзЗржЯрзЛ"],
    "potato": ["potato", "рдЖрд▓реВ", "роЙро░рпБро│рпИроХрпНроХро┐ро┤роЩрпНроХрпБ", "р▓Ер▓▓р│Вр▓Чр│Жр▓бр│Нр▓бр│Ж", "р░мр░Вр░Чр░╛р░│р░╛р░жр▒Бр░Вр░к", "ржЖрж▓рзБ"],
    "garlic": ["garlic", "рд▓рд╣рд╕реБрди", "рокрпВрогрпНроЯрпБ", "р▓мр│Жр▓│р│Нр▓│р│Бр▓│р│Нр▓│р▓┐", "р░╡р▒Жр░▓р▒Нр░▓р▒Бр░▓р░┐", "рж░рж╕рзБржи"],
    "ginger": ["ginger", "рдЕрджрд░рдХ", "роЗроЮрпНроЪро┐", "р▓╢р│Бр▓Вр▓ар▓┐", "р░Ер░▓р▒Нр░▓р░В", "ржЖржжрж╛"],
    "carrot": ["carrot", "рдЧрд╛рдЬрд░", "роХро╛ро░роЯрпН", "р▓Чр▓╛р▓Ьр▓░", "р░Хр░╛р░░р▒Жр░Яр▒Н", "ржЧрж╛ржЬрж░"],
    "cauliflower": ["cauliflower", "рдлреВрд▓рдЧреЛрднреА", "роХрпЛроЪрпБ", "р▓╣р│Вр▓Хр│Лр▓╕р│Б", "р░кр▒Вр░╡р▒Б р░Хр▒Лр░╕р▒Б", "ржлрзБрж▓ржХржкрж┐"],
    "broccoli": ["broccoli", "рдмреНрд░реЛрдХрд▓реА", "рокрпНро░рпЛроХрпНроХрпКро▓ро┐", "р▓мр│Нр▓░р│Лр▓Хр│Лр▓▓р▓┐", "р░мр▒Нр░░р▒Лр░Хр░▓р▒А", "ржмрзНрж░ржХрзЛрж▓рж┐"],
    "cabbage": ["Cabbage", "рдкрддреНрддрд╛ рдЧреЛрднреА", "роорпБроЯрпНроЯрпИроХрпЛроЪрпБ", "р▓Ор▓▓р│Жр▓Хр│Лр▓╕р│Б", "р░Чр▒Лр░мр▒А р░Жр░Хр▒Бр░▓р▒Б", "ржмрж╛ржБржзрж╛ржХржкрж┐"],
    "spinach": ["Spinach", "рдкрд╛рд▓рдХ", "роХрпАро░рпИ", "р▓кр▓╛р▓▓р▓Хр│Н", "р░кр░╛р░▓р░Хр▒Вр░░", "ржкрж╛рж▓ржВ рж╢рж╛ржХ"],
    "methi": ["Fenugreek", "рдореЗрдереА", "ро╡рпЖроирпНродропроорпН", "р▓ор│Жр▓Вр▓др│Нр▓п", "р░ор▒Жр░Вр░др░┐", "ржорзЗржерж┐"],
    "palak": ["Spinach", "рдкрд╛рд▓рдХ", "рокроЪро▓рпИроХрпН роХрпАро░рпИ", "р▓кр▓╛р▓▓р▓Хр│Н", "р░кр░╛р░▓р░Хр▒Вр░░", "ржкрж╛рж▓ржВ рж╢рж╛ржХ"],
    "bottle gourd": ["Bottle Gourd", "рд▓реМрдХреА", "роЪрпБро░рпИроХрпНроХро╛ропрпН", "р▓╕р│Лр▓░р▓Хр▓╛р▓пр▓┐", "р░╕р▒Кр░░р░Хр░╛р░п", "рж▓рж╛ржЙ"],
    "pumpkin": ["Pumpkin", "рдХрджреНрджреВ", "рокро░роЩрпНроХро┐роХрпНроХро╛ропрпН", "р▓Хр│Бр▓Вр▓мр▓│р▓Хр▓╛р▓пр▓┐", "р░Чр▒Бр░ор▒Нр░ор░бр░┐р░Хр░╛р░п", "ржХрзБржоржбрж╝рзЛ"],
    "brinjal": ["Brinjal", "рдмреИрдВрдЧрди", "роХродрпНродро░ро┐роХрпНроХро╛ропрпН", "р▓мр▓жр▓ир│Жр▓Хр▓╛р▓пр▓┐", "р░╡р░Вр░Хр░╛р░п", "ржмрзЗржЧрзБржи"],
    "okra": ["Okra", "рднрд┐рдВрдбреА", "ро╡рпЖрогрпНроЯрпИ", "р▓мр│Жр▓Вр▓бр│Жр▓Хр▓╛р▓пр▓┐", "р░мр▒Жр░Вр░бр░Хр░╛р░п", "ржврзЗржБржбрж╝рж╕"],
    "bell peppers": ["Bell Peppers", "рд╢рд┐рдорд▓рд╛ рдорд┐рд░реНрдЪ", "роХрпБроЯрпИрооро┐ро│роХро╛ропрпН", "р▓╢р▓┐р▓ор│Нр▓▓р▓╛ р▓ор│Жр▓гр▓╕р▓┐р▓ир▓Хр▓╛р▓пр▓┐", "р░╢р░┐р░ор▒Нр░▓р░╛ р░ор░┐р░░р▒Нр░Ър░┐", "ржХрзНржпрж╛ржкрж╕рж┐ржХрж╛ржо"],
    "beans": ["Beans", "рдлрд▓реА", "рокропродрпНродроорпН", "р▓╣р│Бр▓░р▓│р▓┐р▓Хр▓╛р▓пр▓┐", "р░мр▒Ар░ир▒Нр░╕р▒Н", "рж╢рж┐ржо"],
    "peas": ["Peas", "рдордЯрд░", "рокроЯрпНроЯро╛рогро┐", "р▓мр▓Яр▓╛р▓гр▓┐", "р░кр░Ър▒Нр░Ър░┐ р░мр░Яр░╛р░гр▒А", "ржоржЯрж░"],
    "mushrooms": ["Mushrooms", "рдХреБрдореНрднреА", "роХро╛ро│ро╛ройрпН", "р▓Ер▓гр▓мр│Ж", "р░Хр░╛р░│р▒Нр░▓р▒Б", "ржорж╛рж╢рж░рзБржо"],
    "radish": ["Radish", "рдореВрд▓реА", "роорпБро│рпНро│роЩрпНроХро┐", "р▓ор│Вр▓▓р▓Вр▓Чр▓┐", "р░ор▒Бр░▓р▒Нр░▓р░Вр░Чр░┐", "ржорзВрж▓рж╛"],
    "turnip": ["Turnip", "рд╢рд▓рдЬрдо", "роЪро┐роХрокрпНрокрпБроХрпНроХро┐ро┤роЩрпНроХрпБ", "р▓╢р▓▓р▓Чр▓В", "р░╢р░▓р░Чр░ор▒Б", "рж╢рж╛рж▓ржЧржо"],
    "beets": ["Beets", "рдЪреБрдХрдВрджрд░", "роХрпБрооро┐ро┤рпНроХро┐ро┤роЩрпНроХрпБ", "р▓мр│Ар▓Яр│Нр▓░р│Вр▓Яр│Н", "р░мр▒Ар░Яр▒НтАМр░░р▒Вр░Яр▒Н", "ржмрж┐ржЯ"],
    "coriander leaves": ["Coriander Leaves", "рдзрдирд┐рдпрд╛ рдкрддреНрддрд┐рдпрд╛рдВ", "роХрпКродрпНродрооро▓рпНро▓ро┐ роЗро▓рпИроХро│рпН", "р▓Хр│Кр▓др│Нр▓др▓Вр▓мр▓░р▓┐ р▓╕р│Кр▓кр│Нр▓кр│Б", "р░Хр▒Кр░др▒Нр░др░┐р░ор▒Ар░░", "ржзржирзЗржкрж╛рждрж╛"],
    "mint leaves": ["Mint Leaves", "рдкреБрджреАрдирд╛ рдкрддреНрддрд┐рдпрд╛рдВ", "рокрпБродро┐ройро╛ роЗро▓рпИроХро│рпН", "р▓кр│Бр▓жр│Ар▓ир▓╛ р▓Ор▓▓р│Ж", "р░кр▒Бр░жр▒Ар░ир░╛ р░Жр░Хр▒Бр░▓р▒Б", "ржкрзБржжрж┐ржирж╛ ржкрж╛рждрж╛"],
    "curry leaves": ["Curry Leaves", "рдХрдбрд╝реА рдкрддреНрддрд╛", "роХро░рпБро╡рпЗрокрпНрокро┐ро▓рпИ", "р▓Хр▓░р▓┐р▓мр│Зр▓╡р│Б", "р░Хр░░р░┐р░╡р▒Зр░кр░╛р░Хр▒Б", "ржХрж╛рж░рж┐ ржкрж╛рждрж╛"],
    "lemon": ["Lemon", "рдиреАрдВрдмреВ", "роОро▓рпБрооро┐роЪрпНроЪрпИ", "р▓ир▓┐р▓Вр▓мр│Ж", "р░ир░┐р░ор▒Нр░ор░Хр░╛р░п", "рж▓рзЗржмрзБ"],
    "lime": ["Lime", "рдиреАрдВрдмреВ", "роЪро┐ро▒рпБ роОро▓рпБрооро┐роЪрпНроЪрпИ", "р▓▓р│Ир▓ор│Н", "р░▓р▒Ир░ор▒Н", "рж▓рзЗржмрзБ"],
    "milk": ["Milk", "рджреВрдз", "рокро╛ро▓рпН", "р▓╣р▓╛р▓▓р│Б", "р░кр░╛р░▓р▒Б", "ржжрзБржз"],
    "curd": ["Curd", "рджрд╣реА", "роорпЛро░рпН", "р▓ор▓Ьр│Нр▓Ьр▓┐р▓Чр│Ж", "р░кр▒Жр░░р▒Бр░Чр▒Б", "ржжржЗ"],
    "ghee": ["Ghee", "рдШреА", "роирпЖропрпН", "р▓др│Вр▓кр│Нр▓к", "р░ир▒Жр░пр▒Нр░пр░┐", "ржШрж┐"],
    "butter": ["Butter", "рдордХреНрдЦрди", "ро╡рпЖрогрпНрогрпЖропрпН", "р▓мр│Жр▓гр│Нр▓гр│Ж", "р░╡р▒Жр░ир▒Нр░и", "ржорж╛ржЦржи"],
    "paneer": ["Paneer", "рдкрдиреАрд░", "рокройрпАро░рпН", "р▓кр▓ир│Ар▓░р│Н", "р░кр░ир▒Ар░░р▒Н", "ржкржирж┐рж░"],
    "cheese": ["cheese", "рдЪреАрдЬ", "роЪрпАро╕рпН", "р▓Ър│Ар▓╕р│Н", "р░Ър▒Ар░Ьр▒Н", "ржЪрж┐ржЬ"],
    "almonds": ["almonds", "рдмрд╛рджрд╛рдо", "роорпБроирпНродро┐ро░ро┐", "р▓мр▓╛р▓жр▓╛р▓ор▓┐", "р░мр░╛р░жр░В", "ржмрж╛ржжрж╛ржо"],
    "cashews": ["Cashews", "рдХрд╛рдЬреВ", "роорпБроирпНродро┐ро░ро┐рокрпНрокро░рпБрокрпНрокрпБ", "р▓Чр│Лр▓бр▓Вр▓мр▓┐", "р░Хр░╛р░Ьр▒В", "ржХрж╛ржЬрзБ"],
    "pistachios": ["Pistachios", "рдкрд┐рд╕реНрддрд╛", "рокро┐ро╕рпНродро╛", "р▓кр▓┐р▓╕р│Нр▓др│Б", "р░кр░┐р░╕р▒Нр░др░╛", "ржкрж┐рж╕рзНрждрж╛ржЪрж┐ржУ"],
    "walnuts": ["Walnuts", "рдЕрдЦрд░реЛрдЯ", "роЕроХрпНро░рпЛроЯрпН", "р▓Ер▓Хр│Нр▓░р│Лр▓Яр│Н", "р░Ер░Хр▒Нр░░р▒Лр░Яр▒Н", "ржЖржЦрж░рзЛржЯ"],
    "raisins": ["Raisins", "рдХрд┐рд╢рдорд┐рд╢", "роЙро▓ро░рпНроирпНрод родро┐ро░ро╛роЯрпНроЪрпИ", "р▓Тр▓г р▓жр│Нр▓░р▓╛р▓Хр│Нр▓╖р▓┐", "р░Ор░Вр░бр▒Бр░жр▒Нр░░р░╛р░Хр▒Нр░╖", "ржХрж┐рж╢ржорж┐рж╢"],
    "dates": ["Dates", "рдЦрдЬреВрд░", "рокрпЗро░ро┐роЪрпНроЪроорпНрокро┤роорпН", "р▓Цр▓░р│Нр▓Ьр│Вр▓░", "р░Цр░░р▒Нр░Ьр▒Вр░░р░В", "ржЦрзЗржЬрзБрж░"],
    "dried apricots": ["Dried Apricots", "рд╕реВрдЦреЗ рдЦреБрдмрд╛рдиреА", "роЙро▓ро░рпН роЕрокрпНро░ро┐роХрпЛроЯрпН", "р▓Тр▓г р▓╣р▓гр│Нр▓гр│Б", "р░Ор░Вр░бр░┐р░и р░Цр░░р▒Нр░Ьр▒Вр░░р░╛р░▓р▒Б", "рж╢рзБржХржирзЛ ржПржкрзНрж░рж┐ржХржЯ"],
    "dried figs": ["Dried Figs", "рд╕реВрдЦреЗ рдЕрдВрдЬреАрд░", "роЙро▓ро░рпНроирпНрод роЕродрпНродро┐рокрпНрокро┤роорпН", "р▓Тр▓г р▓Ер▓Вр▓Ьр│Вр▓░", "р░Ор░Вр░бр░┐р░и р░Ер░Вр░Ьр▒Ар░░р▒Б", "рж╢рзБржХржирзЛ ржбрзБржорзБрж░"],
    "oil": ["Oil", "рддреЗрд▓", "роОрогрпНрогрпЖропрпН", "р▓Ор▓гр│Нр▓гр│Ж", "р░ир▒Вр░ир▒Ж", "рждрзЗрж▓"],
    "salt": ["Salt", "рдирдордХ", "роЙрокрпНрокрпБ", "р▓мр│Жр▓▓р│Нр▓▓р│Б", "р░Йр░кр▒Нр░кр▒Б", "рж▓ржмржг"],
    "sugar": ["Sugar", "рдЪреАрдиреА", "роЪро░рпНроХрпНроХро░рпИ", "р▓╕р▓Хр│Нр▓Хр▓░р│Ж", "р░Ър░Хр▒Нр░Хр▒Жр░░", "ржЪрж┐ржирж┐"],
    "jaggery": ["Jaggery", "рдЧреБрдбрд╝", "ро╡рпЖро▓рпНро▓роорпН", "р▓мр│Жр▓▓р│Нр▓▓", "р░мр▒Жр░▓р▒Нр░▓р░В", "ржЧрзБржбрж╝"],
    "honey": ["Honey", "рд╢рд╣рдж", "родрпЗройрпН", "р▓Ьр│Зр▓ир│Б", "р░др▒Зр░ир▒Ж", "ржоржзрзБ"],
    "vinegar": ["Vinegar", "рд╕рд┐рд░рдХрд╛", "ро╡ро┐ройро┐роХро░рпН", "р▓╡р▓┐р▓ир│Жр▓Чр▓░р│Н", "р░╡р░┐р░ир▒Жр░Чр░░р▒Н", "ржнрж┐ржирзЗржЧрж╛рж░"],
    "baking soda": ["Baking Soda", "рд╕реЛрдбрд╛", "роЪрпЛроЯро╛", "р▓мр│Зр▓Хр▓┐р▓Вр▓Чр│Н р▓╕р│Лр▓бр▓╛", "р░мр▒Зр░Хр░┐р░Вр░Чр▒Н р░╕р▒Лр░бр░╛", "рж╕рзЛржбрж╛"],
    "baking powder": ["Baking Powder", "рдмреЗрдХрд┐рдВрдЧ рдкрд╛рдЙрдбрд░", "рокрпЗроХрпНроХро┐роЩрпН рокро╡рпБроЯро░рпН", "р▓мр│Зр▓Хр▓┐р▓Вр▓Чр│Н р▓кр│Мр▓бр▓░р│Н", "р░мр▒Зр░Хр░┐р░Вр░Чр▒Н р░кр▒Мр░бр░░р▒Н", "ржмрзЗржХрж┐ржВ ржкрж╛ржЙржбрж╛рж░"],
    "food color": ["Food Color", "рдЦрд╛рджреНрдп рд░рдВрдЧ", "роЙрогро╡рпБ роиро┐ро▒роорпН", "р▓Жр▓╣р▓╛р▓░ р▓мр▓гр│Нр▓г", "р░Жр░╣р░╛р░░ р░░р░Вр░Чр▒Б", "ржЦрж╛ржжрзНржп рж░ржВ"],
    "saffron": ["Saffron", "рдХреЗрд╕рд░", "роХрпБроЩрпНроХрпБроорокрпНрокрпВ", "р▓Хр│Бр▓Вр▓Хр│Бр▓ор▓кр│Б", "р░Хр▒Бр░Вр░Хр▒Бр░ор░кр▒Бр░╡р▒Нр░╡р▒Б", "ржЬрж╛ржлрж░рж╛ржи"],
    "green cardamom pods": ["Green Cardamom Pods", "рд╣рд░реА рдЗрд▓рд╛рдпрдЪреА", "рокроЪрпНроЪрпИ роПро▓роХрпНроХро╛ропрпН", "р▓╣р▓╕р▓┐р▓░р│Б р▓Пр▓▓р▓Хр│Нр▓Хр▓┐", "р░кр░Ър▒Нр░Ъ р░Пр░▓р░Хр▒Бр░▓р▒Б", "рж╕ржмрзБржЬ ржПрж▓рж╛ржЪ"],
    "black cardamom pods": ["Black Cardamom Pods", "рдХрд╛рд▓реА рдЗрд▓рд╛рдпрдЪреА", "роХро░рпБрокрпНрокрпБ роПро▓роХрпНроХро╛ропрпН", "р▓Хр▓кр│Нр▓кр│Б р▓Пр▓▓р▓Хр│Нр▓Хр▓┐", "р░ир░▓р▒Нр░▓ р░Пр░▓р░Хр▒Бр░▓р▒Б", "ржХрж╛рж▓рзЛ ржПрж▓рж╛ржЪ"],
    "poppy seeds": ["Poppy Seeds", "рдЦрд╕рдЦрд╕", "роХроЪроХроЪро╛", "р▓Чр▓╕р▓Чр▓╕р│Ж", "р░Чр░╕р░Чр░╕р░╛р░▓р▒Б", "ржкрзЛрж╕рзНржд"],
    "flax seeds": ["Flax Seeds", "рдЕрд▓рд╕реА рдХреЗ рдмреАрдЬ", "роЖро│ро┐ ро╡ро┐родрпИроХро│рпН", "р▓Ер▓Чр▓╕р│Ж р▓мр│Ар▓Ь", "р░Жр░╡р░╛р░▓р▒Бр░╡р░┐р░др▒Нр░др░ир░╛р░▓р▒Б", "рждрж┐рж╕рж┐рж░ ржмрзАржЬ"],
    "sesame seeds": ["Sesame Seeds", "рддрд┐рд▓", "роОро│рпН ро╡ро┐родрпИроХро│рпН", "р▓Ор▓│р│Нр▓│р│Б", "р░ир▒Бр░╡р▒Нр░╡р▒Бр░▓р▒Б", "рждрж┐рж▓"],
    "fish": ["fish", "рдордЫрд▓реА", "роорпАройрпН", "р▓ор│Ар▓ир│Б", "р░ор▒Ар░ир░В", "ржорж╛ржЫ"],
    "coconut flakes": ["Coconut Flakes", "рдирд╛рд░рд┐рдпрд▓ рдХреЗ рдЧреБрдЪреНрдЫреЗ", "родрпЗроЩрпНроХро╛ропрпН родрпБро░рпБро╡ро▓рпН", "р▓др▓░р│Бр▓Яр│Б р▓др│Жр▓Вр▓Чр▓┐р▓ир▓Хр▓╛р▓пр▓┐", "р░Хр▒Лр░мр▒Нр░мр░░р░┐ р░др▒Бр░░р▒Бр░ор▒Б", "ржирж╛рж░ржХрзЗрж▓ ржХрзБржБржЪрж┐"],
    "coconut milk": ["Coconut Milk", "рдирд╛рд░рд┐рдпрд▓ рдХрд╛ рджреВрдз", "родрпЗроЩрпНроХро╛ропрпН рокро╛ро▓рпН", "р▓др│Жр▓Вр▓Чр▓┐р▓и р▓╣р▓╛р▓▓р│Б", "р░Хр▒Кр░мр▒Нр░мр░░р░┐р░кр░╛р░▓р▒Б", "ржирж╛рж░ржХрзЗрж▓ ржжрзБржз"],
    "mustard paste": ["Mustard Paste", "рд╕рд░рд╕реЛрдВ рдХрд╛ рдкреЗрд╕реНрдЯ", "роХроЯрпБроХрпБ рокрпЗро╕рпНроЯрпН", "р▓╕р▓╛р▓╕р▓┐р▓╡р│Ж р▓кр│Зр▓╕р│Нр▓Яр│Н", "р░Жр░╡р░кр▒Зр░╕р▒Нр░Яр▒Н", "рж╕рж░рж╖рзЗ ржкрзЗрж╕рзНржЯ"],
    "tomato paste": ["Tomato Paste", "рдЯрдорд╛рдЯрд░ рдХрд╛ рдкреЗрд╕реНрдЯ", "родроХрпНроХро╛ро│ро┐ рокрпЗро╕рпНроЯрпН", "р▓Яр│Кр▓ор│Жр▓Яр│К р▓кр│Зр▓╕р│Нр▓Яр│Н", "р░Яр░ор▒Лр░Яр░╛ р░кр▒Зр░╕р▒Нр░Яр▒Н", "ржЯржорзЗржЯрзЛ ржкрзЗрж╕рзНржЯ"],
    "chilli flakes": ["Chilli Flakes", "рдорд┐рд░реНрдЪ рдХреЗ рдЧреБрдЪреНрдЫреЗ", "рооро┐ро│роХро╛ропрпН родрпБрогрпНроЯрпБроХро│рпН", "р▓ор│Жр▓гр▓╕р▓┐р▓и р▓╣р│Бр▓бр▓┐", "р░ор░┐р░░р░кр░Хр░╛р░пр░▓ р░кр▒Кр░бр░┐", "ржорж░рж┐ржЪрзЗрж░ ржлрзНрж▓рзЗржХрзНрж╕"],
    "chicken stock": ["Chicken Stock", "рдЪрд┐рдХрди рд╕реНрдЯреЙрдХ", "роХрпЛро┤ро┐ роЪродрпБро░роорпН", "р▓Ър▓┐р▓Хр▓ир│Н р▓╕р│Нр▓Яр▓╛р▓Хр│Н", "р░Ър░┐р░Хр▒Жр░ир▒Н р░╕р▒Нр░Яр░╛р░Хр▒Н", "ржЪрж┐ржХрзЗржи рж╕рзНржЯржХ"],
    "vegetable stock": ["Vegetable Stock", "рд╕рдмреНрдЬреА рд╕реНрдЯреЙрдХ", "роХро╛ропрпНроХро▒ро┐ роЪродрпБро░роорпН", "р▓др▓░р│Бр▓Яр│Б р▓др▓░р▓Хр▓╛р▓░р▓┐", "р░Хр▒Вр░░р░Чр░╛р░пр░▓ р░╕р▒Нр░Яр░╛р░Хр▒Н", "рж╕ржмржЬрж┐ рж╕рзНржЯржХ"],
    "rice": ["rice", "рдЪрд╛рд╡рд▓", "роЕро░ро┐роЪро┐", "р▓Ер▓Хр│Нр▓Хр▓┐", "р░мр░┐р░пр▒Нр░пр░В", "ржЪрж╛рж▓"]
}
# Database setup for user authentication






# Registration Route

# Index Route (Landing Page after login)
@app.route('/')
def home():
    return render_template('test.html')

@app.route('/chat', methods=['POST'])
def chat():
    user_message = request.json.get('message')
    if user_message:
        response = chat_session.send_message(user_message)
        model_response = response.text
        print(f"Model response: {user_message}")
        print(f"Model response: {model_response}")
        return jsonify({"response": model_response})
    return jsonify({"error": "No message received."}), 400

@app.route('/get-ingredients/<ingredient>', methods=['GET'])
def get_ingredients(ingredient):
    ingredient_data = common_ingredients.get(ingredient.lower())
    if ingredient_data:
        return jsonify({"ingredient_translations": ingredient_data})
    return jsonify({"error": "Ingredient not found."}), 404

# Start the Flask application
if __name__ == "__main__":
    port = int(os.environ.get("PORT", 5000))
    app.run(host='0.0.0.0', port=port, debug=True)